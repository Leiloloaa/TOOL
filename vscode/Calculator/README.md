# Code Inline Calculator - VSCode 插件

这是一款简洁的代码内联计算器，可以自动识别和计算数学表达式，支持多种运算符和复杂计算。

## 功能特性

- 🔢 支持四种基本运算符：`+`、`-`、`*`、`/`
- 🧮 支持多个数的连续计算：`1+2+3`、`2*3*4`
- 📊 状态栏显示当前计算结果
- ⚡ 输入触发：输入数学表达式时自动弹出弹框
- 🎯 弹框显示：显示计算结果，支持一键替换
- 🎨 精度控制：计算结果保留两位小数
- ⌨️ 回车键替换：按回车键将表达式替换为结果
- 🚫 防重复触发：替换后不会再次弹出弹框

## 已屏蔽的功能（历史版本功能）

以下功能在v1.2.0版本中已被屏蔽，但代码中仍保留，可根据需要重新启用：

- 💡 ~~悬停显示计算结果~~（已屏蔽）
- 🎯 ~~内联显示：表达式后面显示 `= 结果 (点击替换)`~~（已屏蔽）
- 🔄 ~~点击按钮替换表达式~~（已屏蔽）
- 📋 ~~复制结果到剪贴板~~（已屏蔽）

> **注意**：这些功能在早期版本中可用，但在v1.2.0中为了简化用户体验而被屏蔽。如需重新启用，可以取消相关代码的注释。

## 使用方法

1. **基本使用**：在任意文本文件中输入数学表达式，例如：`1.2+3.2`
2. **自动弹框**：输入表达式后100ms会自动弹出计算弹框
3. **查看结果**：弹框显示 `表达式 = 结果`
4. **替换表达式**：按回车键将表达式替换为结果
5. **状态栏**：右下角状态栏显示当前计算结果

## 支持的表达式格式

### 基本运算
- **加法**：`1+2`、`1.5+2.3`、`10+20`
- **减法**：`10-5`、`15.5-3.2`
- **乘法**：`2*3`、`4.5*2`
- **除法**：`8/2`、`15/3`

### 多步计算
- **连续加法**：`1+2+3` → `6`
- **连续乘法**：`2*3*4` → `24`
- **混合运算**：`1+2*3` → `7`（先乘后加）
- **复杂表达式**：`10-2*3+4` → `8`

### 精度控制
- **小数计算**：`1/3` → `0.33`
- **精确结果**：`2.5*3.7` → `9.25`

## 开发说明

### 安装依赖
```bash
npm install
```

### 编译插件
```bash
npm run compile
```

### 调试插件
1. 按 F5 启动调试
2. 在新窗口中测试插件功能

### 打包插件
```bash
npm install -g vsce
vsce package
```

## 技术实现

- **开发语言**：TypeScript
- **API基础**：VSCode Extension API
- **核心功能**：
  - `onDidChangeTextDocument`：监听文档变化实现实时计算
  - `QuickPick`：弹框显示计算结果
  - `StatusBarItem`：状态栏集成显示计算结果
- **计算引擎**：
  - 支持运算符优先级（先乘除，后加减）
  - 精度控制（保留两位小数）
  - 错误处理（除零检测）
- **用户体验**：
  - 输入触发弹框（100ms延迟）
  - 回车键替换功能
  - 防重复触发机制
  - 状态栏实时反馈

## 测试用例

### 基本运算测试
```
1+2+3 → 6
2*3*4 → 24
10-5-2 → 3
20/2/2 → 5
```

### 混合运算测试
```
1+2*3 → 7
2*3+4 → 10
10-2*3 → 4
20/2+5 → 15
```

### 精度测试
```
1/3 → 0.33
2.5*3.7 → 9.25
10/3 → 3.33
```

## 文档目录

项目文档已整理到 `doc/` 目录下，包含以下文档：

### 核心文档
- **CHANGELOG.md** - 版本更新日志
- **FEATURES.md** - 功能特性详细说明
- **DISABLED_FEATURES.md** - 已屏蔽功能说明

### 安装指南
- **INSTALL_GUIDE.md** - 通用安装指南
- **CURSOR_INSTALL_GUIDE.md** - Cursor编辑器安装指南
- **CURSOR_VSIX_INSTALL.md** - Cursor VSIX安装指南

### 发布相关
- **PUBLISH_GUIDE.md** - 发布指南
- **QUICK_PUBLISH.md** - 快速发布指南
- **RELEASE_INSTRUCTIONS.md** - 发布说明

### 故障排除
- **SEARCH_TROUBLESHOOTING.md** - 搜索问题排查
- **CURSOR_CACHE_CLEAR.md** - Cursor缓存清理
- **MANUAL_CURSOR_CLEAR.md** - 手动清理Cursor缓存

### 其他文档
- **CHECKLIST.md** - 开发检查清单
- **QUICKSTART.md** - 快速开始指南
- **SCREENSHOTS.md** - 截图说明
