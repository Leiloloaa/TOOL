# Calculator Helper - VSCode 插件

一个智能的VSCode插件，可以自动识别和计算数学表达式，支持多种运算符和复杂计算。

## 功能特性

- 🔢 支持四种基本运算符：`+`、`-`、`*`、`/`
- 🧮 支持多个数的连续计算：`1+2+3`、`2*3*4`
- 💡 悬停显示详细计算结果
- 📊 状态栏显示当前计算结果
- ⚡ 实时计算，无需手动触发
- 🎯 内联显示：表达式后面显示 `= 结果 (点击替换)`
- 🔄 一键替换：点击按钮将表达式替换为结果
- 🎨 精度控制：计算结果保留两位小数
- ⌨️ 回车键替换：按回车键自动替换表达式

## 使用方法

1. **基本使用**：在任意文本文件中输入数学表达式，例如：`1.2+3.2`
2. **查看结果**：将鼠标悬停在表达式上，会显示计算结果
3. **内联显示**：表达式后面会显示 `= 结果 (点击替换)`
4. **替换表达式**：点击按钮或按回车键将表达式替换为结果
5. **状态栏**：右下角状态栏显示当前计算结果

## 支持的表达式格式

### 基本运算
- **加法**：`1+2`、`1.5+2.3`、`10+20`
- **减法**：`10-5`、`15.5-3.2`
- **乘法**：`2*3`、`4.5*2`
- **除法**：`8/2`、`15/3`

### 多步计算
- **连续加法**：`1+2+3` → `6`
- **连续乘法**：`2*3*4` → `24`
- **混合运算**：`1+2*3` → `7`（先乘后加）
- **复杂表达式**：`10-2*3+4` → `8`

### 精度控制
- **小数计算**：`1/3` → `0.33`
- **精确结果**：`2.5*3.7` → `9.25`

## 开发说明

### 安装依赖
```bash
npm install
```

### 编译插件
```bash
npm run compile
```

### 调试插件
1. 按 F5 启动调试
2. 在新窗口中测试插件功能

### 打包插件
```bash
npm install -g vsce
vsce package
```

## 技术实现

- **开发语言**：TypeScript
- **API基础**：VSCode Extension API
- **核心功能**：
  - `HoverProvider`：提供悬停提示
  - `CodeLensProvider`：实现内联显示和点击替换
  - `onDidChangeTextDocument`：监听文档变化实现实时计算
  - `StatusBarItem`：状态栏集成显示计算结果
- **计算引擎**：
  - 支持运算符优先级（先乘除，后加减）
  - 精度控制（保留两位小数）
  - 错误处理（除零检测）
- **用户体验**：
  - 内联结果显示
  - 一键替换功能
  - 回车键快捷操作
  - 状态栏实时反馈

## 测试用例

### 基本运算测试
```
1+2+3 → 6
2*3*4 → 24
10-5-2 → 3
20/2/2 → 5
```

### 混合运算测试
```
1+2*3 → 7
2*3+4 → 10
10-2*3 → 4
20/2+5 → 15
```

### 精度测试
```
1/3 → 0.33
2.5*3.7 → 9.25
10/3 → 3.33
```
